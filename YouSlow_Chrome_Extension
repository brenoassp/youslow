

Clients watch videos in http/https://www.youtube.com
	|
	|
	|_ _ _ BACKGROUND PAGE: bgp.js
	|		+ Use Chrome WebRequest API - detect video URLs and measure HTTP latency
	|
	|_ _ _ CONTENT SCRIPTS: Contenrscript.js that contains JavaScript files that run in the context of web pages
	|		+ Communication to bgp.js
	|		+ AddEventListener, message-passing to Extension (script.js)
	|		+ Locally save measurements
	|
	|_ _ _ WEB ACCESS RESOURCE: script.js that is usable in the context of a web page
			+ Core YouSlow scripts
			+ Communication to contentscript.js
			+ Measure video playback events
			+ Report data to YouSlow monitoring server over HTTPS
			
			

Abandonment case
================
Close during rebuffering
	+ when abandonment starts "1:some numbers"

Close during initial rebuffering
	+ abandonment is "1:0"
	+ adslength ""

Close during pre-roll ads
	+ During video Ads, video fraction is always ZERO
	+ close where adslength is "0?"
	+ abandonment is "1:0"
	

Measure initial buffering length
================================
	1] adslength=0?5
	2] bufferdurationwithtime=0?8
	3] initialbufferingtime=7999
	+ if pre-roll Ads, MAX(1,2,3)
	+ otherwise, MAX(2,3) 
	


Version 1.2.7 
====================
	+ Count number of video chunks
	+ Count total video bytes
	+ Duration of video




Error cases
===========
+delete when bufferduation is larger than timelength
DELETE FROM `basics` WHERE CAST(`bufferduration` AS UNSIGNED) > CAST(`timelength` AS UNSIGNED) and version != ''

+delete when abandonment is '0:0'
DELETE FROM `basics` WHERE abandonment = '0:0' and version != '' 

+delete when video closed by client during playback but timelength is  '0'
DELETE FROM `basics` WHERE abandonment = '2:0' and timelength ='0' and version != '' 



	
		